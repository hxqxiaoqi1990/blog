---
title: 通用备份脚本
tags: [shell脚本]
categories: 脚本
date: 2020-01-23 17:57:55
---

# 介绍

日志备份通用脚本

# 脚本

以下脚本添加到定时任务即可

```bash
#!/usr/bin/bash
# 通用备份脚本

# 日志目录
dir="/root/.pm2/logs"
# 保存日志的时间
Tday=`date --date="1 days ago" "+%Y_%m_%d"`
# 删除日志的时间
Tday2=`date --date="7 days ago" "+%Y_%m_%d"`
log=`ls $dir|grep "^.*log$"`

cd $dir

for i in $log
do
	cp -a $i "$i"_$Tday
	echo "" > $i
	rm -rf "$i"_$Tday2 
done
```

